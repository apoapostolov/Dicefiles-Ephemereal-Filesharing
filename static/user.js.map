{"version":3,"file":"user.js","mappings":"mBAIA,MAAMA,EAAOC,SAASC,iBAAiB,gBACjCC,EAASF,SAASC,iBAAiB,kBAEzCF,EAAKI,QAASC,IACZA,EAAIC,iBAAiB,QAAS,KAC5B,MAAMC,EAASF,EAAIG,QAAQH,IAC3BL,EAAKI,QAASK,IACZA,EAAEC,UAAUC,OAAO,SAAUF,EAAED,QAAQH,MAAQE,GAC/CE,EAAEG,aAAa,gBAAiBH,EAAED,QAAQH,MAAQE,EAAS,OAAS,WAEtEJ,EAAOC,QAASS,IACdA,EAAEH,UAAUC,OAAO,SAAUE,EAAEL,QAAQM,QAAUP,SAgBvDN,SAASC,iBAAiB,2BAA2BE,QAASW,IAC5D,MAAMC,EAAKC,SAASF,EAAGP,QAAQQ,GAAI,IAC/BA,IAAID,EAAGG,YAXb,SAA4BF,GAC1B,MAAMG,EAAQC,KAAKC,MAAQL,EAC3B,OAAIG,EAAQ,IAAe,WACvBA,EAAQ,KAAiB,GAAGG,KAAKC,MAAMJ,EAAQ,YAC/CA,EAAQ,MAAkB,GAAGG,KAAKC,MAAMJ,EAAQ,aAChDA,EAAQ,OAAoB,GAAGG,KAAKC,MAAMJ,EAAQ,cAC/C,IAAIC,KAAKJ,GAAIQ,oBACtB,CAI2BC,CAAmBT,MAK9C,MAAMU,EAAOzB,SAAS0B,cAAc,yBAEpC,GAAID,EAAM,CACR,MAAME,EAAQ3B,SAAS0B,cAAc,0BAC/BE,EAAQ5B,SAAS0B,cAAc,kBAC/BG,EAAS7B,SAAS0B,cAAc,2BAEtC,SAASI,EAAUC,EAAKC,GACtBH,EAAOZ,YAAcc,GAAO,GAC5BF,EAAOpB,UAAUC,OAAO,UAAWsB,EACrC,CAEAP,EAAKpB,iBAAiB,SAAU4B,MAAOC,IACrCA,EAAMC,iBACNL,EAAU,aACV,IACE,MAAMM,QAAiBC,MAAM,eAAgB,CAC3CC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CACnBd,MAAOA,EAAMe,MACbC,MAAO,OACPC,QAASlB,EAAMgB,OAAS,OAGtBG,QAAgBV,EAASW,OAC/B,GAAID,EAAQE,IAAK,MAAM,IAAIC,MAAMH,EAAQE,KACzClB,EAAU,QACZ,CAAE,MAAOoB,GACPpB,EAAUoB,EAAGL,SAAWK,EAAGC,YAAY,EACzC,GAEJ,CAIA,MAAMC,EAAgBpD,SAAS0B,cAAc,2BAE7C,GAAI0B,EAAe,CACjB,MAAMC,EAAiBrD,SAAS0B,cAAc,4BACxC4B,EAAiBtD,SAAS0B,cAAc,4BACxC6B,EAAkBvD,SAAS0B,cAAc,6BAE/C,SAAS8B,EAAmBzB,EAAKC,GAC/BuB,EAAgBtC,YAAcc,GAAO,GACrCwB,EAAgB9C,UAAUC,OAAO,UAAWsB,EAC9C,CAEAoB,EAAc/C,iBAAiB,SAAU4B,MAAOC,IAC9CA,EAAMC,iBACNqB,EAAmB,aACnB,IACE,MAAMpB,QAAiBC,MAAM,eAAgB,CAC3CC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CACnBd,MAAO0B,EAAeX,MACtBC,MAAO,OACPa,UAAWJ,EAAeV,OAAS,OAGjCG,QAAgBV,EAASW,OAC/B,GAAID,EAAQE,IAAK,MAAM,IAAIC,MAAMH,EAAQE,KACzCQ,EAAmB,QACrB,CAAE,MAAON,GACPM,EAAmBN,EAAGL,SAAWK,EAAGC,YAAY,EAClD,GAEJ,C","sources":["webpack:///./user.js"],"sourcesContent":["\"use strict\";\n\n// ── Tab switching ──────────────────────────────────────────────────────────\n\nconst tabs = document.querySelectorAll(\".profile-tab\");\nconst panels = document.querySelectorAll(\".profile-panel\");\n\ntabs.forEach((tab) => {\n  tab.addEventListener(\"click\", () => {\n    const target = tab.dataset.tab;\n    tabs.forEach((t) => {\n      t.classList.toggle(\"active\", t.dataset.tab === target);\n      t.setAttribute(\"aria-selected\", t.dataset.tab === target ? \"true\" : \"false\");\n    });\n    panels.forEach((p) => {\n      p.classList.toggle(\"hidden\", p.dataset.panel !== target);\n    });\n  });\n});\n\n// ── Activity timestamps ────────────────────────────────────────────────────\n\nfunction formatRelativeTime(ts) {\n  const delta = Date.now() - ts;\n  if (delta < 60_000) return \"just now\";\n  if (delta < 3600_000) return `${Math.floor(delta / 60_000)}m ago`;\n  if (delta < 86400_000) return `${Math.floor(delta / 3600_000)}h ago`;\n  if (delta < 2592000_000) return `${Math.floor(delta / 86400_000)}d ago`;\n  return new Date(ts).toLocaleDateString();\n}\n\ndocument.querySelectorAll(\".activity-time[data-ts]\").forEach((el) => {\n  const ts = parseInt(el.dataset.ts, 10);\n  if (ts) el.textContent = formatRelativeTime(ts);\n});\n\n// ── Profile message form ───────────────────────────────────────────────────\n\nconst form = document.querySelector(\"#profile-message-form\");\n\nif (form) {\n  const input = document.querySelector(\"#profile-message-input\");\n  const token = document.querySelector(\"#profile-token\");\n  const status = document.querySelector(\"#profile-message-status\");\n\n  function setStatus(msg, isError) {\n    status.textContent = msg || \"\";\n    status.classList.toggle(\"error\", !!isError);\n  }\n\n  form.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    setStatus(\"Saving...\");\n    try {\n      const response = await fetch(\"/api/account\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          token: token.value,\n          realm: \"acct\",\n          message: input.value || \"\",\n        }),\n      });\n      const payload = await response.json();\n      if (payload.err) throw new Error(payload.err);\n      setStatus(\"Saved\");\n    } catch (ex) {\n      setStatus(ex.message || ex.toString(), true);\n    }\n  });\n}\n\n// ── Interests form ────────────────────────────────────────────────────────\n\nconst interestsForm = document.querySelector(\"#profile-interests-form\");\n\nif (interestsForm) {\n  const interestsInput = document.querySelector(\"#profile-interests-input\");\n  const interestsToken = document.querySelector(\"#profile-interests-token\");\n  const interestsStatus = document.querySelector(\"#profile-interests-status\");\n\n  function setInterestsStatus(msg, isError) {\n    interestsStatus.textContent = msg || \"\";\n    interestsStatus.classList.toggle(\"error\", !!isError);\n  }\n\n  interestsForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    setInterestsStatus(\"Saving...\");\n    try {\n      const response = await fetch(\"/api/account\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          token: interestsToken.value,\n          realm: \"acct\",\n          interests: interestsInput.value || \"\",\n        }),\n      });\n      const payload = await response.json();\n      if (payload.err) throw new Error(payload.err);\n      setInterestsStatus(\"Saved\");\n    } catch (ex) {\n      setInterestsStatus(ex.message || ex.toString(), true);\n    }\n  });\n}\n\n"],"names":["tabs","document","querySelectorAll","panels","forEach","tab","addEventListener","target","dataset","t","classList","toggle","setAttribute","p","panel","el","ts","parseInt","textContent","delta","Date","now","Math","floor","toLocaleDateString","formatRelativeTime","form","querySelector","input","token","status","setStatus","msg","isError","async","event","preventDefault","response","fetch","method","headers","body","JSON","stringify","value","realm","message","payload","json","err","Error","ex","toString","interestsForm","interestsInput","interestsToken","interestsStatus","setInterestsStatus","interests"],"sourceRoot":""}