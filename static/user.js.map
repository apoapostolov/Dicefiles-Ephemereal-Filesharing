{"version":3,"file":"user.js","mappings":"mBAEA,MAAMA,EAAOC,SAASC,cAAc,yBAEpC,IAAKF,EACH,MAAM,IAAIG,MAAM,2BAGlB,MAAMC,EAAQH,SAASC,cAAc,0BAC/BG,EAAQJ,SAASC,cAAc,kBAC/BI,EAASL,SAASC,cAAc,2BAEtC,SAASK,EAAUC,EAAKC,GACtBH,EAAOI,YAAcF,GAAO,GAC5BF,EAAOK,UAAUC,OAAO,UAAWH,EACrC,CAEAT,EAAKa,iBAAiB,SAAUC,UAC9BC,EAAMC,iBACNT,EAAU,aACV,IACE,MAAMU,QAAiBC,MAAM,eAAgB,CAC3CC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBlB,MAAOA,EAAMmB,MACbC,MAAO,OACPC,QAAStB,EAAMoB,OAAS,OAGtBG,QAAgBV,EAASW,OAC/B,GAAID,EAAQE,IACV,MAAM,IAAI1B,MAAMwB,EAAQE,KAE1BtB,EAAU,SACVuB,OAAOC,SAASC,QAClB,CACA,MAAOC,GACL1B,EAAU0B,EAAGP,SAAWO,EAAGC,YAAY,EACzC,G","sources":["webpack:///./user.js"],"sourcesContent":["\"use strict\";\n\nconst form = document.querySelector(\"#profile-message-form\");\n\nif (!form) {\n  throw new Error(\"No profile message form\");\n}\n\nconst input = document.querySelector(\"#profile-message-input\");\nconst token = document.querySelector(\"#profile-token\");\nconst status = document.querySelector(\"#profile-message-status\");\n\nfunction setStatus(msg, isError) {\n  status.textContent = msg || \"\";\n  status.classList.toggle(\"error\", !!isError);\n}\n\nform.addEventListener(\"submit\", async event => {\n  event.preventDefault();\n  setStatus(\"Saving...\");\n  try {\n    const response = await fetch(\"/api/account\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        token: token.value,\n        realm: \"acct\",\n        message: input.value || \"\",\n      }),\n    });\n    const payload = await response.json();\n    if (payload.err) {\n      throw new Error(payload.err);\n    }\n    setStatus(\"Saved\");\n    window.location.reload();\n  }\n  catch (ex) {\n    setStatus(ex.message || ex.toString(), true);\n  }\n});\n\n"],"names":["form","document","querySelector","Error","input","token","status","setStatus","msg","isError","textContent","classList","toggle","addEventListener","async","event","preventDefault","response","fetch","method","headers","body","JSON","stringify","value","realm","message","payload","json","err","window","location","reload","ex","toString"],"sourceRoot":""}