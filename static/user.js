(()=>{"use strict";const e=document.querySelector("#profile-message-form");if(!e)throw new Error("No profile message form");const t=document.querySelector("#profile-message-input"),o=document.querySelector("#profile-token"),r=document.querySelector("#profile-message-status");function n(e,t){r.textContent=e||"",r.classList.toggle("error",!!t)}e.addEventListener("submit",(async e=>{e.preventDefault(),n("Saving...");try{const e=await fetch("/api/account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o.value,realm:"acct",message:t.value||""})}),r=await e.json();if(r.err)throw new Error(r.err);n("Saved"),window.location.reload()}catch(e){n(e.message||e.toString(),!0)}}))})();
//# sourceMappingURL=user.js.map