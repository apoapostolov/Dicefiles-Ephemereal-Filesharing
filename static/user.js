(()=>{"use strict";const e=document.querySelectorAll(".profile-tab"),t=document.querySelectorAll(".profile-panel");e.forEach(o=>{o.addEventListener("click",()=>{const r=o.dataset.tab;e.forEach(e=>{e.classList.toggle("active",e.dataset.tab===r),e.setAttribute("aria-selected",e.dataset.tab===r?"true":"false")}),t.forEach(e=>{e.classList.toggle("hidden",e.dataset.panel!==r)})})}),document.querySelectorAll(".activity-time[data-ts]").forEach(e=>{const t=parseInt(e.dataset.ts,10);t&&(e.textContent=function(e){const t=Date.now()-e;return t<6e4?"just now":t<36e5?`${Math.floor(t/6e4)}m ago`:t<864e5?`${Math.floor(t/36e5)}h ago`:t<2592e6?`${Math.floor(t/864e5)}d ago`:new Date(e).toLocaleDateString()}(t))});const o=document.querySelector("#profile-message-form");if(o){const a=document.querySelector("#profile-message-input"),n=document.querySelector("#profile-token"),s=document.querySelector("#profile-message-status");function c(e,t){s.textContent=e||"",s.classList.toggle("error",!!t)}o.addEventListener("submit",async e=>{e.preventDefault(),c("Saving...");try{const e=await fetch("/api/account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n.value,realm:"acct",message:a.value||""})}),t=await e.json();if(t.err)throw new Error(t.err);c("Saved")}catch(e){c(e.message||e.toString(),!0)}})}const r=document.querySelector("#profile-interests-form");if(r){const i=document.querySelector("#profile-interests-input"),l=document.querySelector("#profile-interests-token"),u=document.querySelector("#profile-interests-status");function d(e,t){u.textContent=e||"",u.classList.toggle("error",!!t)}r.addEventListener("submit",async e=>{e.preventDefault(),d("Saving...");try{const e=await fetch("/api/account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:l.value,realm:"acct",interests:i.value||""})}),t=await e.json();if(t.err)throw new Error(t.err);d("Saved")}catch(e){d(e.message||e.toString(),!0)}})}})();
//# sourceMappingURL=user.js.map