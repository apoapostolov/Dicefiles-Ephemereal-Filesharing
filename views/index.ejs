<!doctype html>
<%- include("head"); %>
<body id="page">
  <nav>
    <h1 id="name"><%=NAME%></h1>
  </nav>
  <% if (locals.publicRooms && locals.rooms && rooms.length > 0) { %>
  <article id="room-directory">
    <h2 class="rd-title">Rooms</h2>
    <div class="room-cards">
      <% for (const room of rooms) { %>
      <a href="/r/<%= room.roomid %>" class="room-card">
        <div class="room-card-name"><%= room.name || room.roomid %></div>
        <% if (room.motd) { %>
        <div class="room-card-motd"><%= room.motd %></div>
        <% } %>
        <div class="room-card-stats">
          <span class="rc-stat"><%= room.files %> files</span>
          <% if (room.users > 0) { %>
          <span class="rc-stat rc-stat-live"><%= room.users %> online</span>
          <% } %>
        </div>
      </a>
      <% } %>
    </div>
  </article>
  <% } else if (locals.publicRooms && locals.rooms && rooms.length === 0) { %>
  <article id="room-directory-empty">
    <h2>No rooms yet</h2>
    <p>Be the first — <a href="/new">create a room</a> to start sharing.</p>
  </article>
  <% } else { %>
  <article>
    <h2>Welcome to Dicefiles</h2>
    <p>A self-hosted file sharing platform designed for hobby communities.</p>

    <p>Jump right into a lively room – drag in maps, books, models, comics, documents, whatever you’ve got. Everything you drop is instantly shareable, searchable, requestable and even readable right in the browser.</p>

    <h3>Quick Start</h3>
    <ul>
      <li><a href="/new">Create a new room</a> or simply open a room URL to begin</li>
      <li>Share the room link with friends (e.g. <code>/r/your-room-name</code>) and start uploading</li>
    </ul>

    <h3>Managing Your Room</h3>
    <ul>
      <li><strong>Create rooms:</strong> either via the <a href="/new">Create Room</a> page or by typing the URL</li>
      <li><strong>Upload files &amp; requests:</strong> drag‑and‑drop files or post request links/images (other users can fulfill or reply), and everything appears instantly in the gallery</li>
      <li><strong>Chat &amp; link archive:</strong> messages are live and every URL is saved for later browsing</li>
      <li><strong>Accounts &amp; profiles:</strong> register to keep your nickname, view achievements, and manage settings</li>
      <li><strong>Moderation:</strong> room owners control their space with delete and lock tools</li>
    </ul>

    <h3>Key Features</h3>
    <ul>
      <li>✓ Real-time chat &amp; file sharing with rich previews (images, videos, audio, PDFs, comics, docs)</li>
      <li>✓ In-page reader (PDF/ePub/MOBI) and CBZ/CBR/CB7 comic support</li>
      <li>✓ Automatic links archive and request system with NEW highlights</li>
      <li>✓ User accounts, profiles, achievements, and room moderation</li>
      <li>✓ Self-hosted with ephemeral uploads and optional public directory</li>
      <li>✓ Built-in automation API – scriptable workflows, webhooks, and bulk operations</li>
      <li>✓ Modern AI‑ready platform with MCP/A2A tools and extensive REST API, perfect for OpenClaw agents</li>
      <li>✓ Configurable pruning keeps inactive rooms from lingering</li>
    </ul>

    <h3>Getting Help</h3>
    <ul>
      <li>Read our <a href="/terms">Terms of Service</a></li>
      <li>Review our <a href="/rules">Rules</a></li>
      <li>Check out our <a href="https://github.com/apoapostolov/Dicefiles-Ephemereal-Filesharing" target="_blank">GitHub repository</a></li>
    </ul>
  </article>
  <% } %>
  <%- include("footer"); %>
</body>
